# SonarQube Configuration for AI Enhanced PDF Scholar
# Agent B1: CI/CD Pipeline Optimization Specialist
# Generated: 2025-01-19

# ===========================
# Project Information
# ===========================
sonar.projectKey=ai-enhanced-pdf-scholar
sonar.projectName=AI Enhanced PDF Scholar
sonar.projectVersion=2.1.0
sonar.projectDescription=Enterprise-grade PDF document analysis and RAG system with advanced AI capabilities

# ===========================
# Source Code Configuration
# ===========================
# Source directories
sonar.sources=src,backend,frontend/src
sonar.sourceEncoding=UTF-8

# Test directories
sonar.tests=tests,frontend/src/__tests__

# Exclusions (files/directories to ignore)
sonar.exclusions=\
    **/*.md,\
    **/*.txt,\
    **/*.yml,\
    **/*.yaml,\
    **/*.json,\
    **/node_modules/**,\
    **/dist/**,\
    **/build/**,\
    **/__pycache__/**,\
    **/migrations/**,\
    **/venv/**,\
    **/env/**,\
    **/htmlcov/**,\
    **/coverage/**,\
    **/.pytest_cache/**,\
    **/static/**,\
    **/media/**,\
    frontend/public/**,\
    scripts/demo_*.py,\
    scripts/test_*.py

# Test exclusions
sonar.test.exclusions=\
    **/conftest.py,\
    **/*_fixtures.py

# ===========================
# Language-Specific Settings
# ===========================

# Python Configuration
sonar.python.version=3.11
sonar.python.xunit.reportPath=test-results.xml
sonar.python.coverage.reportPaths=coverage.xml
sonar.python.bandit.reportPaths=bandit-report.json
sonar.python.pylint.reportPath=pylint-report.txt

# JavaScript/TypeScript Configuration  
sonar.javascript.lcov.reportPaths=frontend/coverage/lcov.info
sonar.typescript.lcov.reportPaths=frontend/coverage/lcov.info
sonar.typescript.tsconfigPath=frontend/tsconfig.json
sonar.eslint.reportPaths=frontend/eslint-report.json

# ===========================
# Quality Gate Settings
# ===========================

# Coverage thresholds
sonar.coverage.exclusions=\
    **/tests/**,\
    **/test_*.py,\
    **/*_test.py,\
    **/conftest.py,\
    **/__init__.py,\
    frontend/src/**/*.test.*,\
    frontend/src/**/*.spec.*,\
    frontend/src/setupTests.ts

# Duplication thresholds
sonar.cpd.exclusions=\
    **/tests/**,\
    **/migrations/**,\
    frontend/src/**/*.test.*

# ===========================
# Quality Profiles
# ===========================

# Use SonarWay profiles with custom rules
sonar.profile.python=Sonar way
sonar.profile.js=Sonar way
sonar.profile.ts=Sonar way

# ===========================
# Analysis Parameters
# ===========================

# Fail analysis on quality gate failure
sonar.qualitygate.wait=true

# Scanner behavior
sonar.scm.provider=git
sonar.scm.forceReloadAll=false

# Branch analysis (for pull requests)
# These are typically set by CI/CD pipeline
# sonar.branch.name=
# sonar.pullrequest.key=
# sonar.pullrequest.branch=
# sonar.pullrequest.base=

# ===========================
# Issue Management
# ===========================

# Issue assignment
sonar.issues.defaultAssigneeLogin=admin

# Issue exclusions by rule
sonar.issue.ignore.multicriteria=e1,e2,e3,e4,e5

# E1: Ignore "TODO" comments in specific directories
sonar.issue.ignore.multicriteria.e1.ruleKey=python:S1135
sonar.issue.ignore.multicriteria.e1.resourceKey=**/scripts/**

# E2: Ignore hardcoded IP addresses in test files
sonar.issue.ignore.multicriteria.e2.ruleKey=python:S1313
sonar.issue.ignore.multicriteria.e2.resourceKey=**/tests/**

# E3: Ignore long parameter lists in configuration files
sonar.issue.ignore.multicriteria.e3.ruleKey=python:S107
sonar.issue.ignore.multicriteria.e3.resourceKey=**/config/**

# E4: Ignore complexity in test files
sonar.issue.ignore.multicriteria.e4.ruleKey=python:S3776
sonar.issue.ignore.multicriteria.e4.resourceKey=**/tests/**

# E5: Ignore import order in __init__.py files
sonar.issue.ignore.multicriteria.e5.ruleKey=python:S402
sonar.issue.ignore.multicriteria.e5.resourceKey=**/__init__.py

# ===========================
# Custom Quality Gates
# ===========================

# Define custom metrics thresholds
# These align with our multi-stage quality gate levels

# Basic Level (Development)
# - Coverage >= 70%
# - Duplicated Lines <= 5%
# - Maintainability Rating <= C
# - Reliability Rating <= C
# - Security Rating <= C

# Standard Level (Staging)  
# - Coverage >= 80%
# - Duplicated Lines <= 3%
# - Maintainability Rating <= B
# - Reliability Rating <= B
# - Security Rating <= B

# Strict Level (Pre-production)
# - Coverage >= 85%
# - Duplicated Lines <= 2%
# - Maintainability Rating <= A
# - Reliability Rating <= A
# - Security Rating <= A

# Enterprise Level (Production)
# - Coverage >= 90%
# - Duplicated Lines <= 1%
# - Maintainability Rating = A
# - Reliability Rating = A  
# - Security Rating = A

# ===========================
# Plugin Configuration
# ===========================

# Security plugins
sonar.security.hotspots.inheritFromParent=true

# External analyzers
sonar.external.bandit.reportPath=bandit-report.json
sonar.external.pylint.reportPath=pylint-report.txt
sonar.external.mypy.reportPath=mypy-report.txt

# ===========================
# Performance Settings
# ===========================

# Scanner performance
sonar.scanner.maxHeapSize=2048m
sonar.log.level=INFO

# Analysis timeout (30 minutes)
sonar.scanner.timeout=1800

# ===========================
# Integration Settings
# ===========================

# GitHub integration (for PR decoration)
sonar.pullrequest.provider=GitHub
sonar.pullrequest.github.repository=ai-enhanced-pdf-scholar

# Webhook settings
sonar.webhooks.project=https://api.github.com/repos/ai-enhanced-pdf-scholar/dispatches

# ===========================
# Custom Properties
# ===========================

# Project metadata
sonar.links.homepage=https://github.com/ai-enhanced-pdf-scholar
sonar.links.ci=https://github.com/ai-enhanced-pdf-scholar/actions
sonar.links.scm=https://github.com/ai-enhanced-pdf-scholar
sonar.links.issue=https://github.com/ai-enhanced-pdf-scholar/issues

# Team information
sonar.team=AI-PDF-Team
sonar.maintainer=Agent-B1-CI-CD-Specialist

# Environment classification
sonar.environment=production
sonar.buildString=${BUILD_NUMBER}
sonar.analysis.buildNumber=${BUILD_NUMBER}

# ===========================
# Conditional Configuration
# ===========================

# These properties are set dynamically by CI/CD pipeline based on context:
#
# For main branch analysis:
# sonar.branch.name=main
#
# For feature branch analysis:  
# sonar.branch.name=${BRANCH_NAME}
#
# For pull request analysis:
# sonar.pullrequest.key=${PR_NUMBER}
# sonar.pullrequest.branch=${PR_BRANCH}
# sonar.pullrequest.base=${PR_TARGET_BRANCH}
#
# For release analysis:
# sonar.projectVersion=${RELEASE_VERSION}
# sonar.branch.name=release/${RELEASE_VERSION}

# ===========================
# Advanced Analysis Settings
# ===========================

# Enable/disable specific analyzers
sonar.python.bandit.activate=true
sonar.python.pylint.activate=true
sonar.python.flake8.activate=false
sonar.python.mypy.activate=true

# Security analysis
sonar.security.review.enable=true
sonar.security.hotspots.enable=true

# Technical debt settings
sonar.technicalDebt.developmentCost=30
sonar.technicalDebt.ratingGrid=0.1,0.2,0.5,1

# ===========================
# Notification Settings  
# ===========================

# Quality gate notifications
sonar.notifications.delay=0
sonar.notifications.enabled=true

# ===========================
# Archive Settings
# ===========================

# Analysis history retention (90 days)
sonar.dbcleaner.daysBeforeDeletingAllSnapshots=90

# Component history retention (365 days)
sonar.dbcleaner.daysBeforeDeletingInactiveShortLivingBranches=30
sonar.dbcleaner.weeksBeforeDeletingAllSnapshots=4

# ===========================
# Debug Settings
# ===========================

# Enable for troubleshooting (disable in production)
# sonar.verbose=true
# sonar.showProfiling=true
# sonar.log.level=DEBUG

# ===========================
# Enterprise Features
# ===========================

# Portfolio management (if using SonarQube Enterprise)
# sonar.projectTag=backend,frontend,ai,pdf,enterprise

# Application definition
# sonar.application.key=ai-pdf-scholar-app
# sonar.application.name=AI Enhanced PDF Scholar Application

# License compliance
# sonar.license.secured=true